---
description: Internationalization and localization settings
globs: src/renderer/src/**
alwaysApply: false
---
# Internationalization (i18n)

## Technology Stack

- **Framework**: vue-i18n
- **Location**: `src/renderer/src/i18n/`
- **Requirement**: All user-facing strings must use i18n keys

## Supported Locales

DeepChat supports 12 languages:
- da-DK (Danish)
- en-US (English - United States)
- fa-IR (Persian - Iran)
- fr-FR (French)
- he-IL (Hebrew)
- ja-JP (Japanese)
- ko-KR (Korean)
- pt-BR (Portuguese - Brazil)
- ru-RU (Russian)
- zh-CN (Chinese - Simplified)
- zh-HK (Chinese - Hong Kong)
- zh-TW (Chinese - Traditional)

## File Structure

```
src/renderer/src/i18n/
├── index.ts                        # i18n configuration
├── en-US/                          # English translations
│   ├── common.json
│   └── ...
├── zh-CN/                          # Chinese translations
│   ├── common.json
│   └── ...
├── ja-JP/                          # Japanese translations
│   ├── common.json
│   └── ...
├── ko-KR/                          # Korean translations
│   ├── common.json
│   └── ...
├── fr-FR/                          # French translations
│   ├── common.json
│   └── ...
├── ru-RU/                          # Russian translations
│   ├── common.json
│   └── ...
├── zh-HK/                          # Chinese (Hong Kong)
│   ├── common.json
│   └── ...
├── zh-TW/                          # Chinese (Taiwan)
│   ├── common.json
│   └── ...
├── pt-BR/                          # Portuguese (Brazil)
│   ├── common.json
│   └── ...
├── fa-IR/                          # Persian (Iran)
│   ├── common.json
│   └── ...
└── da-DK/                          # Danish
    ├── common.json
    └── ...
```

## Usage Guidelines

### Translation Key Naming

- Use dot-separated hierarchical structure
- Use lowercase letters
- Use descriptive names
- Group by feature/context

Examples:
- `common.button.submit`
- `common.button.cancel`
- `chat.send.placeholder`
- `settings.provider.model.label`

### Adding New Translations

1. Add the key to ALL language files
2. Keep key names consistent across all locales
3. Ensure English is the reference for accuracy

Example:
```json
// en-US/common.json
{
  "common": {
    "button": {
      "submit": "Submit",
      "cancel": "Cancel"
    }
  }
}

// zh-CN/common.json
{
  "common": {
    "button": {
      "submit": "提交",
      "cancel": "取消"
    }
  }
}
```

### Using Translations in Components

```vue
<script setup lang="ts">
import { useI18n } from 'vue-i18n'

const { t, locale } = useI18n()

const message = t('common.button.submit')

const changeLanguage = (lang: string) => {
  locale.value = lang
}
</script>

<template>
  <button>{{ t('common.button.submit') }}</button>
  <button @click="changeLanguage('zh-CN')">中文</button>
  <button @click="changeLanguage('en-US')">English</button>
</template>
```

### Dynamic Language Switching

```typescript
const { locale } = useI18n()

// Switch language
locale.value = 'zh-CN'
locale.value = 'en-US'
locale.value = 'ja-JP'
```

## Translation Quality Guidelines

### Latin-based Languages
Base translations on English source:
- en-US → fr-FR, ru-RU, pt-BR

### Non-Latin Languages
Base translations on Chinese source when more appropriate:
- zh-CN → ja-JP, ko-KR

### Proper Nouns and Technical Terms
- Keep "DeepChat" untranslated unless established convention exists
- "MCP" remains "MCP" in all languages
- "Agents" can remain "Agents" in some languages, consider "智能体" for Chinese
- Follow established conventions for well-known technical terms
- API names, file formats should remain in original form

### Translation Principles

1. **Accuracy**: Convey original meaning precisely
2. **Cultural Appropriateness**: Follow local language habits and internet application conventions
3. **Length Considerations**: Balance accuracy with UI aesthetics and space constraints
4. **Consistency**: Maintain consistent terminology across the application
5. **Natural Phrasing**: Translations should feel natural to native speakers

## Best Practices

1. **Avoid hardcoded text**: All user-visible text must use i18n keys
2. **Use meaningful key names**: Keys should be descriptive and follow hierarchy
3. **Keep structure consistent**: Maintain same key structure across all locale files
4. **Regular checks**: Use `pnpm run i18n` to check for missing translations
5. **Generate types**: Run `pnpm run i18n:types` to generate TypeScript types for translation keys

## Checking Translations

```bash
# Check completeness using zh-CN as source
pnpm run i18n

# Check completeness using en-US as source
pnpm run i18n:en

# Generate TypeScript types for autocomplete
pnpm run i18n:types
```

## i18n Code Review

Use the `i18n-code-reviewer` agent to:
- Validate translation quality
- Check for missing translations
- Review proper noun handling
- Ensure consistency across languages

The agent will also check that:
- All code comments are in English
- All log messages are in English
- No non-English text in code comments or console statements

## TypeScript Support

After running `pnpm run i18n:types`, TypeScript types are generated for autocomplete:

```typescript
import type { I18n } from 'vue-i18n'

const t: I18n['t'] = useI18n().t

// Autocomplete will suggest available translation keys
t('common.button.') // Shows: submit, cancel, save, etc.
```
